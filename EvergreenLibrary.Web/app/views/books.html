<div class="row">
    <div class="col-md-8 col-md-offset-2">
        <h4 class="text-center">List of books</h4>
        <div data-ng-hide="message == ''" class="alert alert-danger">
            {{message}}
        </div>
        <a href="#/books/add" class="btn btn-add btn-info pull-right" role="button" permission="true" permission-role="Librarian">Add book</a>
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Year</th>
                    <th permission="true" permission-role="Librarian">Reader</th>
                    <th permission="true" permission-role="Librarian">Edit</th>
                    <th permission="true" permission-role="Librarian">Delete</th>
                    <th permission="true" permission-role="Customer">Read</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="book in books" data-ng-class="(book.state==='free') ? 'success' : 'danger'">
                    <td>
                        {{ book.title }}
                    </td>
                    <td>
                        {{ book.author }}
                    </td>
                    <td>
                        {{ book.year }}
                    </td>
                    <td permission="true" permission-role="Librarian">
                        {{ book.state }}
                    </td>
                    <td permission="true" permission-role="Librarian">
                        <a href="#/books/{{book.id}}/edit" class="btn btn-success" role="button"><span class="glyphicon glyphicon-pencil"></span></a>
                    </td>
                    <td permission="true" permission-role="Librarian">
                        <button type="button" class="btn btn-danger" data-ng-click="deleteBook($index)"><span class="glyphicon glyphicon-trash"></span></button>
                    </td>
                    <td permission="true" permission-role="Customer">
                        <button type="button" class="btn btn-info center-block" ng-disabled="(book.state!=='free')" ng-hide="(book.state===userName)" data-ng-click="readBook($index)">Read</button>
                        <button type="button" class="btn btn-info center-block" ng-show="(book.state===userName)" data-ng-click="returnBook($index)">Return</button>

                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
